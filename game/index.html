<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×©×—×•×¨ ×•×¤×ª×•×¨ | ×˜×™××•×Ÿ ×•×¤×•××‘×”</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ—</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;900&family=Rubik:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --amber: #ffb900;
            --dark: #050505;
            --surface: #111;
            --green: #25D366;
            --cell-size: clamp(45px, 12vw, 65px);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }
        body { 
            font-family: 'Heebo', sans-serif; 
            background-color: var(--dark); 
            color: white; 
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px;
        }

        header { position: fixed; top: 0; width: 100%; padding: 15px; text-align: center; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); border-bottom: 1px solid #222; }
        .logo { font-family: 'Rubik'; font-weight: 900; color: white; text-decoration: none; font-size: 1.2rem; }

        .game-container { margin-top: 60px; text-align: center; }
        h1 { font-family: 'Rubik'; color: var(--amber); margin-bottom: 10px; font-size: 1.8rem; }
        p { color: #888; margin-bottom: 30px; }

        /* --- Grid Layout --- */
        .nonogram-wrapper {
            display: grid;
            grid-template-columns: auto auto;
            gap: 5px;
            background: #222;
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .top-hints {
            display: grid;
            grid-template-columns: repeat(5, var(--cell-size));
            gap: 4px;
            padding-bottom: 5px;
        }

        .side-hints {
            display: grid;
            grid-template-rows: repeat(5, var(--cell-size));
            gap: 4px;
            padding-left: 10px;
            text-align: left;
            align-items: center;
        }

        .hint-box {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            font-weight: 900;
            color: #666;
            font-size: 0.9rem;
        }

        .side-hints .hint-box {
            flex-direction: row;
            justify-content: flex-end;
            padding-left: 10px;
        }

        .hint-num { margin: 2px; }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, var(--cell-size));
            grid-template-rows: repeat(5, var(--cell-size));
            gap: 4px;
        }

        .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            background: var(--surface);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: 0.2s;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .cell.filled { background: var(--amber); box-shadow: 0 0 15px rgba(255, 185, 0, 0.3); }
        .cell.marked::after { content: 'âœ•'; color: #444; font-size: 1.2rem; }

        /* --- Win Message --- */
        #win-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: none; flex-direction: column; align-items: center; justify-content: center;
            z-index: 100; text-align: center;
        }
        #win-overlay h2 { font-size: 3rem; color: var(--green); margin-bottom: 20px; }

        .btn {
            padding: 15px 40px; border-radius: 50px; border: none;
            background: var(--amber); color: #000; font-weight: 900;
            font-size: 1.2rem; cursor: pointer; transition: 0.3s;
        }
        .btn:hover { transform: scale(1.05); }

        .footer-info { margin-top: 30px; color: #444; font-size: 0.8rem; }
    </style>
</head>
<body>

    <header>
        <a href="../" class="logo">×˜×™××•×Ÿ<span>×•×¤×•××‘×”</span></a>
    </header>

    <div class="game-container">
        <h1>×©×—×•×¨ ×•×¤×ª×•×¨ ğŸ§©</h1>
        <p>×”×©×ª××©×• ×‘×¨××–×™× ×›×“×™ ×œ×’×œ×•×ª ××ª ×”×¦×™×•×¨ ×”××¡×ª×ª×¨</p>

        <div class="nonogram-wrapper">
            <div></div> <!-- ×¤×™× ×” ×¨×™×§×” -->
            <div class="top-hints" id="topHints"></div>
            <div class="side-hints" id="sideHints"></div>
            <div class="grid" id="grid"></div>
        </div>

        <div class="footer-info">
            ×œ×—×™×¦×” ××—×ª: ×¦×‘×™×¢×” | ×œ×—×™×¦×” ×©× ×™×™×”: ××™×§×¡ (×¡×™××•×Ÿ ×¨×™×§) | ×œ×—×™×¦×” ×©×œ×™×©×™×ª: ××™×¤×•×¡
        </div>
        <button class="btn" style="margin-top: 20px; padding: 10px 25px; font-size: 1rem;" onclick="initGame()">×”×—×œ×£ ×¦×™×•×¨ ğŸ”„</button>
    </div>

    <div id="win-overlay">
        <h2>×¤×™×¦×—×ª× ××ª ×”×§×•×“! ğŸš€</h2>
        <p style="margin-bottom: 30px; font-size: 1.2rem;">×”××•×˜×•××¦×™×” ×¢×•×‘×“×ª ××•×©×œ×.</p>
        <button class="btn" onclick="initGame()">×œ×¦×™×•×¨ ×”×‘× ğŸ—</button>
    </div>

<script>
    // ×××’×¨ ×¦×•×¨×•×ª 5x5 (1 = ×¦×‘×•×¢, 0 = ×¨×™×§)
    const patterns = [
        { name: "×œ×‘", data: [[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]] },
        { name: "×‘×™×ª", data: [[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[1,1,0,1,1],[1,1,0,1,1]] },
        { name: "×—×™×•×š", data: [[0,1,0,1,0],[0,0,0,0,0],[1,0,0,0,1],[0,1,1,1,0],[0,0,0,0,0]] },
        { name: "×¤×œ×•×¡", data: [[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]] },
        { name: "×¨×™×‘×•×¢", data: [[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]] },
        { name: "××“×¨×’×•×ª", data: [[0,0,0,0,1],[0,0,0,1,1],[0,0,1,1,1],[0,1,1,1,1],[1,1,1,1,1]] }
    ];

    let targetGrid = [];
    let userGrid = [];

    function calculateHints(arr) {
        let hints = [];
        let count = 0;
        for (let val of arr) {
            if (val === 1) count++;
            else {
                if (count > 0) hints.push(count);
                count = 0;
            }
        }
        if (count > 0) hints.push(count);
        return hints.length ? hints : [0];
    }

    function initGame() {
        document.getElementById('win-overlay').style.display = 'none';
        const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];
        targetGrid = randomPattern.data;
        userGrid = Array(5).fill().map(() => Array(5).fill(0));

        renderHints();
        renderGrid();
    }

    function renderHints() {
        const topEl = document.getElementById('topHints');
        const sideEl = document.getElementById('sideHints');
        topEl.innerHTML = '';
        sideEl.innerHTML = '';

        // ×¨××–×™× ×œ××¢×œ×” (×¢××•×“×•×ª)
        for (let c = 0; c < 5; c++) {
            const col = [targetGrid[0][c], targetGrid[1][c], targetGrid[2][c], targetGrid[3][c], targetGrid[4][c]];
            const hints = calculateHints(col);
            const box = document.createElement('div');
            box.className = 'hint-box';
            hints.forEach(h => box.innerHTML += `<span class="hint-num">${h}</span>`);
            topEl.appendChild(box);
        }

        // ×¨××–×™× ×‘×¦×“ (×©×•×¨×•×ª)
        for (let r = 0; r < 5; r++) {
            const hints = calculateHints(targetGrid[r]);
            const box = document.createElement('div');
            box.className = 'hint-box';
            hints.forEach(h => box.innerHTML += `<span class="hint-num">${h}</span>`);
            sideEl.appendChild(box);
        }
    }

    function renderGrid() {
        const gridEl = document.getElementById('grid');
        gridEl.innerHTML = '';

        for (let r = 0; r < 5; r++) {
            for (let c = 0; c < 5; c++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.onclick = () => handleCellClick(r, c);
                gridEl.appendChild(cell);
            }
        }
    }

    function handleCellClick(r, c) {
        const cellIdx = r * 5 + c;
        const cellEl = document.querySelectorAll('.cell')[cellIdx];
        
        // ××—×–×•×¨ ××¦×‘×™×: 0 (×¨×™×§) -> 1 (×¦×‘×•×¢) -> 2 (××™×§×¡) -> 0
        userGrid[r][c] = (userGrid[r][c] + 1) % 3;

        cellEl.classList.remove('filled', 'marked');
        if (userGrid[r][c] === 1) cellEl.classList.add('filled');
        else if (userGrid[r][c] === 2) cellEl.classList.add('marked');

        checkWin();
    }

    function checkWin() {
        for (let r = 0; r < 5; r++) {
            for (let c = 0; c < 5; c++) {
                const target = targetGrid[r][c];
                const user = userGrid[r][c] === 1 ? 1 : 0;
                if (target !== user) return;
            }
        }
        document.getElementById('win-overlay').style.display = 'flex';
    }

    initGame();
</script>
</body>
</html>
